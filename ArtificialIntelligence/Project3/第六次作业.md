### ç¬¬ä¸‰æ¬¡ä½œä¸š

[TOC]

> å§“åï¼šå¾é¸¿é£	ç­çº§ï¼š111172	å­¦å·ï¼š20171002608
>

#### Code

##### Question 1 (4 points): Value Iteration

ç¬¬ä¸€é—®è¦å®ç°ä»·å€¼è¿­ä»£ï¼Œæ ¹æ®å…¬å¼ï¼š
$$
V_{k+1}(s)<-\mathop{max}\limits_a\sum_{s^{'}}T(s,a,s^{'})[R(s,a,s^{'})+{\gamma}V_k(S^{'})]
$$
é¦–å…ˆè¦çŸ¥é“è¦ç”¨åˆ°çš„å‡½æ•°ï¼š

> è·å–æ‰€æœ‰çš„state(æ¯ä¸ªstateå¯ä»¥çœ‹æˆæ ¼å­ä¸–ç•Œä¸­çš„ä¸€ä¸ªæ ¼å­çš„çŠ¶æ€)
>
> `mdp.getStates()`
>
> å¯¹äºä¼ å…¥stateç»™å‡ºå¯èƒ½çš„action
>
> `mdp.getPossibleActions(state)`
>
> å¯¹ä¸ä¼ å…¥çš„stateä¸actionç»™å‡ºæ‰€æœ‰çš„(ä¸‹ä¸€æ­¥state,åˆ°è¾¾è¿™ä¸ªstateçš„æ¦‚ç‡{$T(s,a,s^{'})$})å› ä¸ºæœ‰noise çš„å½±å“
>
> `mdp.getTransitionStatesAndProbs(state, action)`
>
> è·å–ä¼ å…¥state,action,ä¸‹ä¸€stateçš„å›æŠ¥{$R(s,a,s^{'})$}
>
> `mdp.getReward(state, action, nextState)`

åœ¨`computeQValueFromValues(self, state, action)`ä¸­è®¡ç®—stateçŠ¶æ€ä¸‹é€‰æ‹©æ­¤actionçš„`qValue`ï¼Œç„¶ååœ¨`runValueIteration()`ä¸­è¿›è¡Œè¿­ä»£ï¼Œå¯¹äºæ¯ä¸ªstateï¼ˆæ ¼å­ï¼‰ï¼Œé€‰æ‹©æœ€å¤§çš„`qValue`ï¼Œç„¶åæ›´æ–°æ¯ä¸ªstateçš„valueï¼Œåœ¨è¿™é‡Œä¸èƒ½ç›´æ¥ä¿®æ”¹ç±»ä¸­çš„valueï¼Œè€Œæ˜¯éå†å®Œæ‰€æœ‰çš„stateä¹‹åå†ä¿®æ”¹ï¼Œå› ä¸ºä¸€æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨çš„ä¸Šä¸€æ¬¡çš„stateä¸èƒ½è¢«æ”¹å˜ï¼›æœ€åå°±æ˜¯`computeActionFromValues(self, state)`,é€šè¿‡è®¡ç®—å½“å‰ä¼ å…¥stateçš„æ¯ä¸ªactionå¯¹åº”çš„`qValue`ï¼Œé€‰æ‹©`qValue`æœ€å¤§çš„actionã€‚Codeï¼š

```python
    def runValueIteration(self):
        # Write value iteration code here
        "*** YOUR CODE HERE ***"
        i=0
        while i<self.iterations:
            temp_values = util.Counter()  # æ¯æ¬¡è¿­ä»£éƒ½è¦ç”¨ä¸Šä¸€æ¬¡çš„å€¼
            for state in self.mdp.getStates():
                max_value=-float('inf')
                for action in self.mdp.getPossibleActions(state):
                    v=self.computeQValueFromValues(state,action)
                    max_value=max(max_value,v)
                    temp_values[state]=max_value
            self.values = temp_values
            i+=1

    def computeQValueFromValues(self, state, action):
        """
          Compute the Q-value of action in state from the
          value function stored in self.values.
        """
        "*** YOUR CODE HERE ***"
        q_val=0
        for t_state,t_prob in self.mdp.getTransitionStatesAndProbs(state,action):
            reward=self.mdp.getReward(state,action,t_state)
            q_val+=t_prob*(reward+self.discount*self.getValue(t_state))
        return q_val
        util.raiseNotDefined()

    def computeActionFromValues(self, state):
        """
          The policy is the best action in the given state
          according to the values currently stored in self.values.

          You may break ties any way you see fit.  Note that if
          there are no legal actions, which is the case at the
          terminal state, you should return None.
        """
        "*** YOUR CODE HERE ***"
        m_action = None
        if self.mdp.isTerminal(state):
            return m_action
        max_value = -float('inf')
        for action in self.mdp.getPossibleActions(state):
            v = self.computeQValueFromValues(state,action)
            if max_value < v:
                max_value = v
                m_action = action
        return m_action
        util.raiseNotDefined()
```

##### Question 2 (1 point): Bridge Crossing Analysis

ç¬¬äºŒé—®ä¸»è¦æ˜¯è°ƒå‚ï¼Œåœ¨ç»™å‡ºçš„åœ°å›¾ä¸­ï¼Œä¸èƒ½èµ°ä¸¤è¾¹çš„ä½åˆ†ï¼Œæ‰€ä»¥åªéœ€è¦ä¸èƒ½æœ‰noiseå³å¯ï¼Œè¿™é‡Œè®¾ç½®noiseä¸º0ï¼Œdiscountä¸å˜ä¸º0.9ã€‚codeï¼š

```python
def question2():
    answerDiscount = 0.9
    answerNoise = 0
    return answerDiscount, answerNoise
```

##### Question 3 (5 points): Policies

ç¬¬ä¸‰é—®ä¾ç„¶æ˜¯è°ƒå‚ï¼Œåœ¨ç»™å®šçš„åœ°å›¾ä¸­ï¼Œåˆ†åˆ«æ‰§è¡Œç­–ç•¥ä¸ºï¼š

1. é€‰æ‹©è¿‘çš„å‡ºå£ï¼Œä¸é¿å¼€æ‚¬å´–

2. é€‰æ‹©è¿‘çš„å‡ºå£ï¼Œé¿å¼€æ‚¬å´–

3. é€‰æ‹©è¿œçš„å‡ºå£ï¼Œä¸é¿å¼€æ‚¬å´–

4. é€‰æ‹©è¿œçš„å‡ºå£ï¼Œé¿å¼€æ‚¬å´–

5. å°½é‡ä¸ç»“æŸï¼Œé¿å¼€æ‚¬å´–

æˆ‘çš„æ€è·¯æ˜¯ï¼š

1. è¦é€‰æ‹©è¿‘çš„å‡ºå£ï¼Œåˆ™è¦å°‘èµ°æ ¼å­ï¼Œæ‰€ä»¥åº”è¯¥å°†`answerLivingReward`è®¾ä¸ºè´Ÿï¼Œåä¹‹è°ƒä¸ºæ­£æ•°ï¼Œä½†æ˜¯ä¸èƒ½å¤ªå¤§ï¼Œå¤ªå¤§å¯èƒ½å¯¼è‡´æ— æ³•ç»“æŸï¼›

2. è¦é¿å¼€æ‚¬å´–ï¼Œåˆ™è¦å°½é‡çœ‹çœ¼å‰çš„æ±‡æŠ¥ï¼Œä¸è¦çœ‹çš„è¿‡è¿œï¼Œè°ƒä½`answerDiscount`ï¼Œåä¹‹è°ƒé«˜ä¸€ç‚¹ï¼›

3. è¦å°½é‡ä¸ç»“æŸï¼Œåªéœ€è¦æŠŠ`answerLivingReward`çš„å›æŠ¥è®¾ç½®æ¯”ç»“æŸè¦å¤§å³å¯ã€‚

æ ¹æ®è¿™ä¸‰æ¡è§„åˆ™ï¼Œè¿›è¡Œç®€å•çš„è°ƒæ•´ï¼Œå³å¯é€šè¿‡ã€‚Codeï¼š

```python
def question3a():
    # é€‰æ‹©è¿‘çš„å‡ºå£ï¼Œä¸é¿å¼€æ‚¬å´–
    answerDiscount = 0.5
    answerNoise = 0.01
    answerLivingReward = -2
    return answerDiscount, answerNoise, answerLivingReward
    # If not possible, return 'NOT POSSIBLE'

def question3b():
    # é€‰æ‹©è¿‘çš„å‡ºå£ï¼Œé¿å¼€æ‚¬å´–
    answerDiscount = 0.2
    answerNoise = 0.1
    answerLivingReward = -2
    return answerDiscount, answerNoise, answerLivingReward
    # If not possible, return 'NOT POSSIBLE'

def question3c():
    # é€‰æ‹©è¿œçš„å‡ºå£ï¼Œä¸é¿å¼€æ‚¬å´–
    answerDiscount = 0.5
    answerNoise = 0.01
    answerLivingReward = 0.1
    return answerDiscount, answerNoise, answerLivingReward
    # If not possible, return 'NOT POSSIBLE'

def question3d():
    # é€‰æ‹©è¿œçš„å‡ºå£ï¼Œé¿å¼€æ‚¬å´–
    answerDiscount = 0.4
    answerNoise = 0.1
    answerLivingReward = 0.1
    return answerDiscount, answerNoise, answerLivingReward
    # If not possible, return 'NOT POSSIBLE'

def question3e():
    # å°½é‡ä¸ç»“æŸï¼Œé¿å¼€æ‚¬å´–
    answerDiscount = 0
    answerNoise = 0
    answerLivingReward = 11
    return answerDiscount, answerNoise, answerLivingReward
    # If not possible, return 'NOT POSSIBLE'
```

#### Auto grader

```bash
python autograder.py -q q1
```

<img src="ç¬¬å…­æ¬¡ä½œä¸š.assets/image-20200407140009751.png" alt="image-20200407140009751" style="zoom:67%;" />

```bash
python autograder.py -q q2
```

<img src="ç¬¬å…­æ¬¡ä½œä¸š.assets/image-20200407140054484.png" alt="image-20200407140054484" style="zoom:67%;" />

```bash
python autograder.py -q q3
```

<img src="ç¬¬å…­æ¬¡ä½œä¸š.assets/image-20200407140134878.png" alt="image-20200407140134878" style="zoom:67%;" />

#### Summary

åˆšå¼€å§‹å®Œå…¨çœ‹ä¸æ‡‚è¿™ä¸ªï¼ˆä¸Šè¯¾æ²¡è®¤çœŸå¬ğŸ˜…ï¼‰ï¼Œè¿™ç¯‡çŸ¥ä¹ä¸“æ å¯¹æˆ‘å¸®åŠ©å¾ˆå¤šï¼š[David Silverå¼ºåŒ–å­¦ä¹ å…¬å¼€è¯¾ä¸­æ–‡è®²è§£åŠå®è·µ](https://zhuanlan.zhihu.com/reinforce)ï¼Œå†…å®¹æ˜¯David Silveræ•™æˆå…³äºå¼ºåŒ–å­¦ä¹ çš„[å…¬å¼€è¯¾](https://www.youtube.com/playlist?list=PL7-jPKtc4r78-wCZcQn5IqyuWhBZ8fOxT)ï¼ˆè®²çš„å¤ªå¿«æ²¡æœ‰å­—å¹•å¬ä¸æ‡‚ğŸ˜…ï¼‰ã€‚

> æœ¬æ–‡é“¾æ¥ï¼šhttps://ass.xhofe.top/ai-ass6

